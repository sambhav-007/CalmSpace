<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="gemi.css" />
    <link rel="stylesheet" href="insights.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <title>CalmSpace - Insights Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="app-container">
      <!-- Navigation -->
      <nav class="navbar">
        <div class="logo">
          <i class="fas fa-brain pulse"></i>
          <span>CalmSpace</span>
        </div>
        <div class="nav-links">
          <a href="gemi.html">Journal</a>
          <a href="insights.html" class="active">Insights</a>
          <a href="progress.html">Progress</a>
        </div>
        <div class="navbar-actions">
          <div class="meditation-launcher" title="Open meditation timer">
            <i class="fas fa-spa"></i>
          </div>
          <div class="theme-toggle">
            <i class="fas fa-moon"></i>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <main>
        <div class="content-container">
          <!-- Insights Dashboard -->
          <div class="insights-dashboard">
            <!-- Header Section with Date and Actions -->
            <header class="dashboard-header">
              <div class="header-left">
                <h1 class="insights-title">Insights Dashboard</h1>
                <p class="current-date" id="current-date">April 22, 2025</p>
              </div>
              <div class="header-right">
                <div class="period-selector">
                  <label for="time-range">Time Period:</label>
                  <div class="period-buttons">
                    <button class="period-btn" data-value="7">Week</button>
                    <button class="period-btn active" data-value="30">
                      Month
                    </button>
                    <button class="period-btn" data-value="90">Quarter</button>
                    <button class="period-btn" data-value="all">
                      All Time
                    </button>
                  </div>
                  <select id="time-range" class="glass-select hidden">
                    <option value="7">Last 7 days</option>
                    <option value="30" selected>Last 30 days</option>
                    <option value="90">Last 90 days</option>
                    <option value="all">All time</option>
                  </select>
                </div>
                <div class="action-buttons">
                  <button
                    class="action-btn"
                    id="refresh-insights-btn"
                    title="Refresh Insights"
                  >
                    <i class="fas fa-sync-alt"></i>
                  </button>
                  <button
                    class="action-btn"
                    id="export-insights-btn"
                    title="Export Insights Report"
                  >
                    <i class="fas fa-download"></i>
                  </button>
                </div>
              </div>
            </header>

            <!-- Dashboard Summary Cards -->
            <section class="summary-section">
              <div class="summary-cards">
                <div class="summary-card" id="entries-card">
                  <div class="card-icon purple">
                    <i class="fas fa-book"></i>
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>Journal Entries</h3>
                      <div class="trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>12%</span>
                      </div>
                    </div>
                    <div class="card-value" id="total-entries">0</div>
                    <div class="card-subtitle">Total entries this period</div>
                  </div>
                </div>

                <div class="summary-card" id="streak-card">
                  <div class="card-icon blue">
                    <i class="fas fa-fire"></i>
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>Current Streak</h3>
                      <div class="streak-badge" id="streak-badge">0</div>
                    </div>
                    <div class="card-value" id="streak-count">0</div>
                    <div class="card-subtitle">Consecutive days journaling</div>
                  </div>
                </div>

                <div class="summary-card" id="mood-card">
                  <div class="card-icon green">
                    <i class="fas fa-smile"></i>
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>Dominant Mood</h3>
                      <div class="trend">
                        <span id="mood-trend-icon"
                          ><i class="fas fa-equals"></i
                        ></span>
                      </div>
                    </div>
                    <div class="card-value" id="dominant-mood">--</div>
                    <div class="card-subtitle">
                      Based on your recent entries
                    </div>
                  </div>
                </div>

                <div class="summary-card" id="meditation-card">
                  <div class="card-icon orange">
                    <i class="fas fa-spa"></i>
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>Meditation</h3>
                      <div class="trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>8%</span>
                      </div>
                    </div>
                    <div class="card-value">
                      <span id="meditation-minutes">0</span> min
                    </div>
                    <div class="card-subtitle">Total meditation time</div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Search Section -->
            <section class="search-section">
              <div class="search-container">
                <div class="search-input-wrapper">
                  <i class="fas fa-search search-icon"></i>
                  <input
                    type="text"
                    id="insights-search"
                    class="insights-search"
                    placeholder="Search your journal entries or analyze any topic..."
                  />
                  <button class="clear-search" id="clear-search-btn">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <button class="search-btn" id="search-btn">
                  <i class="fas fa-search"></i> Search
                </button>
              </div>
              <div class="search-results" id="search-results"></div>
            </section>

            <!-- Main Dashboard Grid -->
            <section class="dashboard-grid">
              <!-- Emotions Chart Panel -->
              <div class="dashboard-panel emotions-panel">
                <div class="panel-header">
                  <h2><i class="fas fa-smile"></i> Emotional Landscape</h2>
                  <div class="panel-actions">
                    <button
                      class="panel-action-btn"
                      data-chart="emotions-chart"
                    >
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="emotions-container">
                    <div class="chart-wrapper">
                      <canvas id="emotions-chart"></canvas>
                    </div>
                    <div class="chart-legend" id="emotions-legend"></div>
                  </div>
                  <div class="emotion-insights" id="emotion-insights">
                    <p>Your emotional patterns will be analyzed here...</p>
                  </div>
                </div>
              </div>

              <!-- Themes Panel -->
              <div class="dashboard-panel themes-panel">
                <div class="panel-header">
                  <h2><i class="fas fa-lightbulb"></i> Key Themes</h2>
                  <div class="panel-actions">
                    <button class="panel-action-btn" data-chart="keyword-cloud">
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="tag-cloud" id="keyword-cloud"></div>
                  <div class="themes-insights">
                    <h4>Theme Analysis</h4>
                    <p id="themes-insights-text">
                      Journal more to see theme analysis...
                    </p>
                  </div>
                </div>
              </div>

              <!-- Mood Trend Panel -->
              <div class="dashboard-panel mood-panel">
                <div class="panel-header">
                  <h2><i class="fas fa-chart-line"></i> Mood Trends</h2>
                  <div class="panel-actions">
                    <button class="panel-action-btn" data-chart="mood-chart">
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="chart-wrapper">
                    <canvas id="mood-chart"></canvas>
                  </div>
                  <div class="mood-averages">
                    <div class="mood-average">
                      <span class="avg-label">Weekly Avg</span>
                      <span class="avg-value" id="weekly-mood-avg">--</span>
                    </div>
                    <div class="mood-average">
                      <span class="avg-label">Monthly Avg</span>
                      <span class="avg-value" id="monthly-mood-avg">--</span>
                    </div>
                    <div class="mood-average">
                      <span class="avg-label">Overall Avg</span>
                      <span class="avg-value" id="overall-mood-avg">--</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Activity Calendar Panel -->
              <div class="dashboard-panel activity-panel">
                <div class="panel-header">
                  <h2>
                    <i class="fas fa-calendar-check"></i> Journaling Activity
                  </h2>
                  <div class="panel-actions">
                    <button
                      class="panel-action-btn"
                      data-chart="activity-chart"
                    >
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="chart-wrapper">
                    <canvas id="activity-chart"></canvas>
                  </div>
                  <div class="activity-stats">
                    <div class="activity-stat">
                      <span class="stat-label">Most active day</span>
                      <span class="stat-value" id="most-active-day">--</span>
                    </div>
                    <div class="activity-stat">
                      <span class="stat-label">Avg. words per entry</span>
                      <span class="stat-value" id="avg-words">0</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Time of Day Panel -->
              <div class="dashboard-panel time-panel">
                <div class="panel-header">
                  <h2><i class="fas fa-clock"></i> Time Analysis</h2>
                  <div class="panel-actions">
                    <button class="panel-action-btn" data-chart="time-chart">
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="chart-wrapper">
                    <canvas id="time-chart"></canvas>
                  </div>
                  <div class="time-insight" id="time-insight">
                    Start journaling to see when you tend to reflect most.
                  </div>
                </div>
              </div>

              <!-- AI Insights Panel -->
              <div class="dashboard-panel ai-panel">
                <div class="panel-header">
                  <h2><i class="fas fa-robot"></i> AI Insights</h2>
                  <div class="panel-actions">
                    <button class="panel-action-btn" id="generate-insights-btn">
                      <i class="fas fa-redo"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="ai-insights" id="ai-insights">
                    <div class="ai-insights-content">
                      <div class="ai-thinking" id="ai-thinking">
                        <div class="thinking-dots">
                          <span></span>
                          <span></span>
                          <span></span>
                        </div>
                        <p>Analyzing your journal entries...</p>
                      </div>
                      <div id="ai-insights-text">
                        <p class="insights-placeholder">
                          Click "Generate Insights" to analyze your journaling
                          patterns and receive personalized insights.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Comparison Panel (Initially Hidden) -->
              <div
                class="dashboard-panel comparison-panel"
                id="comparison-container"
              >
                <div class="panel-header">
                  <h2>
                    <i class="fas fa-balance-scale"></i>
                    <span id="comparison-title">Period Comparison</span>
                  </h2>
                  <div class="panel-actions">
                    <button class="panel-action-btn" id="close-comparison-btn">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
                <div class="panel-body">
                  <div class="comparison-periods">
                    <div class="period-label current-period-label">
                      <span id="current-period">Current Period</span>
                    </div>
                    <div class="period-label previous-period-label">
                      <span id="previous-period">Previous Period</span>
                    </div>
                  </div>
                  <div class="comparison-content">
                    <div class="comparison-chart-wrapper">
                      <canvas id="comparison-chart"></canvas>
                    </div>
                    <div class="comparison-insights" id="comparison-insights">
                      <!-- Insights will be dynamically added here -->
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Dashboard Footer -->
            <footer class="dashboard-footer">
              <button id="toggle-comparison-btn" class="dashboard-btn">
                <i class="fas fa-chart-bar"></i> Compare Periods
              </button>
              <button id="view-detailed-btn" class="dashboard-btn primary">
                <i class="fas fa-chart-pie"></i> View Detailed Analysis
              </button>
            </footer>
          </div>
        </div>
      </main>

      <!-- Chart Menu Popup -->
      <div class="chart-menu" id="chart-menu">
        <div class="menu-option" id="download-chart">
          <i class="fas fa-download"></i> Download Chart
        </div>
        <div class="menu-option" id="fullscreen-chart">
          <i class="fas fa-expand"></i> View Fullscreen
        </div>
        <div class="menu-option" id="chart-settings">
          <i class="fas fa-cog"></i> Chart Settings
        </div>
      </div>

      <!-- Fullscreen Chart Modal -->
      <div class="modal" id="fullscreen-chart-modal">
        <div class="modal-content glass-morphism">
          <div class="modal-header">
            <h3 id="fullscreen-chart-title">Chart Title</h3>
            <button class="close-modal"><i class="fas fa-times"></i></button>
          </div>
          <div class="modal-body">
            <div class="fullscreen-chart-container">
              <canvas id="fullscreen-canvas"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Visual Elements -->
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
      </div>
    </div>

    <!-- Meditation Timer Container -->
    <div class="meditation-container" id="meditation-container"></div>

    <!-- JavaScript -->
    <script src="meditation.js"></script>
    <script src="gemi.js"></script>
    <script src="insights.js"></script>
  </body>
</html>
